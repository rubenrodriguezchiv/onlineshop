SELECT SUM(totalcart) AS totalcart FROM (SELECT iduser, codproduct, image, name, um, price*SUM(quality) AS totalcart FROM (SELECT * FROM cart INNER JOIN products ON cart.codproduct=products.cod) AS resumecart WHERE resumecart.iduser=28 GROUP BY resumecart.codproduct) AS totalcart